---
title: Probleme mit Token
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 01/15/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "7774"
- "9004351"
ms.openlocfilehash: 14a9681c08920094813497e7a75eb87bb0733cbc
ms.sourcegitcommit: e378232f4c9ef4e962208100db752221e7bd2dd6
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/20/2021
ms.locfileid: "49912003"
---
# <a name="issues-with-tokens"></a><span data-ttu-id="19da0-102">Probleme mit Token</span><span class="sxs-lookup"><span data-stu-id="19da0-102">Issues with tokens</span></span>

<span data-ttu-id="19da0-103">Führen Sie die folgenden Schritte durch, um Probleme im Zusammenhang mit Token zu beheben:</span><span class="sxs-lookup"><span data-stu-id="19da0-103">To manage issues related to tokens, you can perform the following steps:</span></span>

1. <span data-ttu-id="19da0-104">Sie können die Gültigkeitsdauer für von Microsoft Identity Platform ausgestellte Zugriffs-, ID- oder SAML-Tokens angeben.</span><span class="sxs-lookup"><span data-stu-id="19da0-104">You can specify the lifetime of an access, ID, or SAML token issued by Microsoft identity platform.</span></span> <span data-ttu-id="19da0-105">Sie können die Tokengültigkeitsdauer für alle Apps in Ihrer Organisation festlegen, für eine mehrinstanzfähige (multiorganisatorische) Anwendung oder für einen bestimmten Dienstprinzipal in Ihrer Organisation.</span><span class="sxs-lookup"><span data-stu-id="19da0-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span> <span data-ttu-id="19da0-106">Weitere Informationen finden Sie unter [Konfigurierbare Tokengültigkeitsdauer in Microsoft Identity Platform (Vorschau)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span><span class="sxs-lookup"><span data-stu-id="19da0-106">For more information, see [Configurable token lifetimes in Microsoft identity platform (preview)](https://docs.microsoft.com/azure/active-directory/develop/active-directory-configurable-token-lifetimes).</span></span>
2. <span data-ttu-id="19da0-107">Zugriffstoken ermöglichen es Clients, geschützte Web-APIs sicher aufzurufen, und werden von Web-APIs zur Authentifizierung und Autorisierung verwendet.</span><span class="sxs-lookup"><span data-stu-id="19da0-107">Access tokens enable clients to securely call protected web APIs, and are used by web APIs to perform authentication and authorization.</span></span> <span data-ttu-id="19da0-108">Gemäß der OAuth-Spezifikation sind Zugriffstoken nicht transparente Zeichenfolgen ohne festgelegtes Format. Einige Identitätsanbieter (IDPs) verwenden GUIDs, andere verschlüsselte Blobs.</span><span class="sxs-lookup"><span data-stu-id="19da0-108">As per the OAuth specification, access tokens are opaque strings without a set format - some identity providers (IDPs) use GUIDs, others use encrypted blobs.</span></span> <span data-ttu-id="19da0-109">Microsoft Identity Platform verwendet eine Vielzahl von Zugriffstokenformaten, abhängig von der Konfiguration der API, die das Token akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="19da0-109">The Microsoft identity platform uses a variety of access token formats, depending on the configuration of the API that accepts the token.</span></span> <span data-ttu-id="19da0-110">Unter [Zugriffstoken von Microsoft Identity Platform](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint) erfahren Sie, wie Ihre API die Ansprüche in einem Zugriffstoken validieren und verwenden kann.</span><span class="sxs-lookup"><span data-stu-id="19da0-110">To learn how your API can validate and use the claims inside an access token, see [Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/userinfo#calling-the-userinfo-endpoint).</span></span>
3. <span data-ttu-id="19da0-111">Die Microsoft-Authentifizierungsbibliothek (MSAL) unterstützt mehrere Authentifizierungsflows zur Verwendung in verschiedenen Anwendungsszenarien.</span><span class="sxs-lookup"><span data-stu-id="19da0-111">The Microsoft Authentication Library (MSAL) supports several authentication flows for use in different application scenarios.</span></span> <span data-ttu-id="19da0-112">Weitere Informationen finden Sie unter [Authentifizierungsflows](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span><span class="sxs-lookup"><span data-stu-id="19da0-112">For more information, see [Authentication flows](https://docs.microsoft.com/azure/active-directory/develop/msal-authentication-flows#how-each-flow-emits-tokens-and-codes).</span></span>
4. <span data-ttu-id="19da0-113">Die OAuth 2.0-Autorisierungscode-Erteilung kann in Apps verwendet werden, die auf einem Gerät installiert sind, um Zugriff auf geschützte Ressourcen, wie z. B. Web-APIs, zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="19da0-113">The OAuth 2.0 authorization code grant can be used in apps that are installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="19da0-114">Mit der Microsoft Identity Platform-Implementierung von OAuth 2.0 können Sie Ihren mobilen und Desktop-Apps Anmelde- und API-Zugriff hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="19da0-114">Using the Microsoft identity platform implementation of OAuth 2.0, you can add sign-in and API access to your mobile and desktop apps.</span></span> <span data-ttu-id="19da0-115">Weitere Informationen zur direkten Programmierung für das Protokoll in Ihrer Anwendung in einer beliebigen Sprache finden Sie unter [Microsoft Identity Platform und OAuth 2.0 Autorisierungscodeflow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token).</span><span class="sxs-lookup"><span data-stu-id="19da0-115">See [Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow#refresh-the-access-token) for how to program directly against the protocol in your application, using any language.</span></span>
5. <span data-ttu-id="19da0-116">OpenID Connect (OIDC) ist ein auf OAuth 2.0 aufbauendes Authentifizierungsprotokoll, das Sie für die sichere Anmeldung eines Benutzers bei einer Anwendung verwenden können.</span><span class="sxs-lookup"><span data-stu-id="19da0-116">OpenID Connect (OIDC) is an authentication protocol built on OAuth 2.0 that you can use to securely sign in a user to an application.</span></span> <span data-ttu-id="19da0-117">Mit der Microsoft Identity Platform-Endpunktimplementierung von OpenID Connect können Sie Ihren Apps Anmelde- und API-Zugriff hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="19da0-117">When you use the Microsoft identity platform endpoint's implementation of OpenID Connect, you can add sign-in and API access to your apps.</span></span> <span data-ttu-id="19da0-118">Unter [Microsoft Identity Platform und OpenID Connect-Protokoll](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) wird gezeigt, wie dies sprachunabhängig möglich ist, und beschrieben, wie HTTP-Nachrichten gesendet und empfangen werden können, ohne irgendwelche Open-Source-Bibliotheken von Microsoft zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="19da0-118">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc#send-the-sign-in-request) shows how to do this independent of language and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>
    - <span data-ttu-id="19da0-119">Der UserInfo-Endpunkt ist Teil des OIDC-Standards und dient der Rückgabe von Ansprüchen über den Benutzer, der sich authentifiziert hat.</span><span class="sxs-lookup"><span data-stu-id="19da0-119">The UserInfo endpoint is part of the OIDC standard, designed to return claims about the user that authenticated.</span></span> <span data-ttu-id="19da0-120">Weitere Informationen finden Sie unter [UserInfo-Endpunkt in Microsoft Identity Platform](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span><span class="sxs-lookup"><span data-stu-id="19da0-120">For more information, see [Microsoft identity platform UserInfo endpoint](https://docs.microsoft.com/azure/active-directory/develop/userinfo#consider-use-an-id-token-instead).</span></span>
    - <span data-ttu-id="19da0-121">Im Beispiel [Aufrufen einer Web-API in einer Web-App unter Verwendung von Azure AD und OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) wird die Erstellung einer MVC-Webanwendung gezeigt, die Azure AD für die Anmeldung über das OpenID Connect-Protokoll verwendet und dann eine Web-API aufruft. Dies erfolgt unter der Identität des angemeldeten Benutzers anhand von Token, die über OAuth 2.0 abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="19da0-121">The [Calling a web API in a web app using Azure AD and OpenID Connect](https://docs.microsoft.com/samples/azure-samples/active-directory-dotnet-webapp-webapi-openidconnect/active-directory-dotnet-webapp-webapi-openidconnect/) sample shows how to build an MVC web application that uses Azure AD for sign-in using the OpenID Connect protocol, and then call a web API under the signed-in user's identity using tokens obtained via OAuth 2.0.</span></span> <span data-ttu-id="19da0-122">In diesem Beispiel werden die OpenID Connect ASP .Net OWIN-Middleware und ADAL.Net verwendet.</span><span class="sxs-lookup"><span data-stu-id="19da0-122">This sample uses the OpenID Connect ASP .Net OWIN middleware and ADAL .Net.</span></span>
6. <span data-ttu-id="19da0-123">[Konfigurieren einer Anwendung zur Bereitstellung einer Web-API](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis): In diesem Schnellstart registrieren Sie eine Web-API bei Microsoft Identity Platform und machen sie für Client-Apps verfügbar, indem Sie einen Beispielbereich hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="19da0-123">[Configure an application to expose a web API](https://docs.microsoft.com/azure/active-directory/develop/quickstart-configure-app-expose-web-apis) - In this quickstart, you register a web API with the Microsoft identity platform and expose it to client apps by adding an example scope.</span></span> <span data-ttu-id="19da0-124">Indem Sie Ihre Web-API registrieren und über Bereiche verfügbar machen, können Sie autorisierten Benutzern und Client-Apps, die auf Ihre API zugreifen, einen berechtigungsbasierten Zugriff auf deren Ressourcen gewähren.</span><span class="sxs-lookup"><span data-stu-id="19da0-124">By registering your web API and exposing it through scopes, you can provide permissions-based access to its resources to authorized users and client apps that access your API.</span></span>
7. <span data-ttu-id="19da0-125">In Azure Active Directory B2C (Azure AD B2C) ist der Flow „Anmeldeinformationen des Resourcenbesitzers“ (Resource Owner Password Credentials, ROPC) ein OAuth-Standardauthentifizierungsflow.</span><span class="sxs-lookup"><span data-stu-id="19da0-125">In Azure Active Directory B2C (Azure AD B2C), the resource owner password credentials (ROPC) flow is an OAuth standard authentication flow.</span></span> <span data-ttu-id="19da0-126">In diesem Flow tauscht eine Anwendung, die auch als vertrauende Partei bezeichnet wird, gültige Anmeldeinformationen gegen Token aus.</span><span class="sxs-lookup"><span data-stu-id="19da0-126">In this flow, an application, also known as the relying party, exchanges valid credentials for tokens.</span></span> <span data-ttu-id="19da0-127">Die Anmeldeinformationen umfassen eine Benutzer-ID und ein Kennwort.</span><span class="sxs-lookup"><span data-stu-id="19da0-127">The credentials include a user ID and password.</span></span> <span data-ttu-id="19da0-128">Die zurückgegebenen Token sind ein ID-Token, ein Zugriffstoken und ein Aktualisierungstoken.</span><span class="sxs-lookup"><span data-stu-id="19da0-128">The tokens returned are an ID token, access token, and a refresh token.</span></span> <span data-ttu-id="19da0-129">Weitere Informationen finden Sie unter [Einrichten eines Flows „Anmeldeinformationen des Resourcenbesitzers“ in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span><span class="sxs-lookup"><span data-stu-id="19da0-129">For more information, see [Set up a resource owner password credentials flow in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/add-ropc-policy?tabs=app-reg-ga&pivots=b2c-user-flow).</span></span> 

